"use strict";(self.webpackChunkKatalon_Docs=self.webpackChunkKatalon_Docs||[]).push([[53426],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),c=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},v=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),v=c(r),m=n,b=v["".concat(l,".").concat(m)]||v[m]||d[m]||s;return r?a.createElement(b,i(i({ref:t},p),{},{components:r})):a.createElement(b,i({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=r.length,i=new Array(s);i[0]=v;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var c=2;c<s;c++)i[c]=r[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}v.displayName="MDXCreateElement"},47679:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>v,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=r(87462),n=(r(67294),r(3905)),s=r(44996);const i={id:"973e29b0-22b2-11ed-9930-0242fe3e4a3f",title:"Handle WebDrivers with EventFiringWebDriver in Katalon Studio",slug:"create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio",hide_title:!0},o='<a id="id" class="anchor_top_offset"/><a id="ariaid-title1" class="anchor_top_offset"/>Handle WebDrivers with EventFiringWebDriver in <span xmlns="http://www.w3.org/1999/xhtml" className="ph">Katalon Studio</span>',l={unversionedId:"973e29b0-22b2-11ed-9930-0242fe3e4a3f",id:"973e29b0-22b2-11ed-9930-0242fe3e4a3f",title:"Handle WebDrivers with EventFiringWebDriver in Katalon Studio",description:"Note:",source:"@site/docs/973e29b0-22b2-11ed-9930-0242fe3e4a3f.md",sourceDirName:".",slug:"/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio",permalink:"/docs/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio",draft:!1,tags:[],version:"current",frontMatter:{id:"973e29b0-22b2-11ed-9930-0242fe3e4a3f",title:"Handle WebDrivers with EventFiringWebDriver in Katalon Studio",slug:"create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio",hide_title:!0},sidebar:"aSidebar",previous:{title:"Upgrade or Downgrade WebDrivers in Katalon Studio",permalink:"/docs/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/upgrade-or-downgrade-webdrivers-in-katalon-studio"},next:{title:"Internet Explorer Configurations for Katalon Studio",permalink:"/docs/create-tests/manage-projects/set-up-projects/web-testing/internet-explorer-configurations-for-katalon-studio"}},c={},p=[{value:'<a id="id_1" class="anchor_top_offset"/>Use WebDriver Event Listeners',id:"use-webdriver-event-listeners",level:2},{value:'<a id="id_2" class="anchor_top_offset"/>Use RemoteWebDriver',id:"use-remotewebdriver",level:2},{value:'<a id="id_3" class="anchor_top_offset"/>See also',id:"see-also",level:2}],d={toc:p};function v(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"handle-webdrivers-with-eventfiringwebdriver-in-katalon-studio"},(0,n.kt)("a",{id:"id",class:"anchor_top_offset"}),(0,n.kt)("a",{id:"ariaid-title1",class:"anchor_top_offset"}),"Handle WebDrivers with EventFiringWebDriver in ",(0,n.kt)("span",{xmlns:"http://www.w3.org/1999/xhtml",className:"ph"},"Katalon Studio")),(0,n.kt)("div",{xmlns:"http://www.w3.org/1999/xhtml",className:"note note note_note"},(0,n.kt)("span",{className:"note__title"},"Note:"),(0,n.kt)("ul",{className:"ul"},(0,n.kt)("li",{className:"li"},(0,n.kt)("p",{className:"p"},"Starting in ",(0,n.kt)("strong",{className:"ph b"},"Katalon Studio version 7.0.0"),", you can use the Selenium-based class ",(0,n.kt)("code",{className:"ph codeph"},"EventFiringWebDriver"),"to configure event-driven capabilities related to your WebDrivers for test execution.")))),(0,n.kt)("p",{xmlns:"http://www.w3.org/1999/xhtml",className:"p"},"This can be used for example when logging steps or triggering   certain events before an operation. You can learn more about this   class from the Selenium documentation here: ",(0,n.kt)("a",{className:"xref j-external-link",href:"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/events/EventFiringWebDriver.html",target:"_blank"},"EventFiringWebDriver"),"."),(0,n.kt)("p",{xmlns:"http://www.w3.org/1999/xhtml",className:"p"},"In this article, we show you how to handle WebDrivers with the   support of ",(0,n.kt)("code",{className:"ph codeph"},"EventFiringWebDriver"),"."),(0,n.kt)("h2",{id:"use-webdriver-event-listeners"},(0,n.kt)("a",{id:"id_1",class:"anchor_top_offset"}),"Use WebDriver Event Listeners"),(0,n.kt)("p",{xmlns:"http://www.w3.org/1999/xhtml",className:"p"},"You can use ",(0,n.kt)("code",{className:"ph codeph"},"WebDriverEventListener")," to handle events   started by the WebDriver, which happens for example, before or   after navigation, before or after a click. If   ",(0,n.kt)("code",{className:"ph codeph"},"EventFiringWebDriver")," is a class that wraps around the   WebDriver to throw events, ",(0,n.kt)("code",{className:"ph codeph"},"WebDriverEventListeners")," is   an interface to catch WebDriver events. You can learn more about   this interface from the Selenium documentation here: ",(0,n.kt)("a",{className:"xref j-external-link",href:"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/events/WebDriverEventListener.html",target:"_blank"},"WebDriverEventListener")," "),(0,n.kt)("p",{xmlns:"http://www.w3.org/1999/xhtml",className:"p"},"Below is an example use of a custom   ",(0,n.kt)("code",{className:"ph codeph"},"WebDriverEventListener"),":"),(0,n.kt)("ol",{xmlns:"http://www.w3.org/1999/xhtml",className:"ol"},(0,n.kt)("li",{className:"li"},"Create a new package to contain a keyword. Go to ",(0,n.kt)("strong",{className:"ph b"},"File       > New > Package"),". Here, we name the package     ",(0,n.kt)("strong",{className:"ph b"},"customkeyword"),"."),(0,n.kt)("li",{className:"li"},"     ",(0,n.kt)("p",{className:"p"},"Create a new keyword to handle WebDriver events."),"     ",(0,n.kt)("ul",{className:"ul"},(0,n.kt)("li",{className:"li"},"Go to ",(0,n.kt)("strong",{className:"ph b"},"File > New > Keywords"),". A         ",(0,n.kt)("strong",{className:"ph b"},"New")," dialog opens."),(0,n.kt)("li",{className:"li"},"         ",(0,n.kt)("p",{className:"p"},"Click ",(0,n.kt)("strong",{className:"ph b"},"Browse")," to choose a package for your           keyword, then manually type the class name. Here, we choose the           package created from Step 1 and name the keyword           ",(0,n.kt)("strong",{className:"ph b"},"MyCustomWebEventListener"),". Click           ",(0,n.kt)("strong",{className:"ph b"},"OK"),". A new keyword page opens."),"         ",(0,n.kt)("p",{className:"p"},"           ",(0,n.kt)("img",{className:"image",src:(0,s.Z)("https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/handle-webdrivers/KS-WEBDRIVER-Choose-package-and-name-the-keyword.png"),width:600,alt:"Choose the package and create the keyword"}),(0,n.kt)("br",null),(0,n.kt)("br",null),"         "),"       "),(0,n.kt)("li",{className:"li"},"         ",(0,n.kt)("p",{className:"p"},"Copy and paste below sample code into the created keyword."),"         ",(0,n.kt)("pre",{className:"pre codeblock"},(0,n.kt)("code",null,"import org.openqa.selenium.WebDriver","\n","import org.openqa.selenium.support.events.AbstractWebDriverEventListener","\n","\n","public class MyCustomWebEventListener extends AbstractWebDriverEventListener ","{","\n","    ","@Override","\n","    ","public void beforeNavigateTo(String url, WebDriver driver) ","{","\n","        ",'println "Before navigating to " + url;',"\n","    ","}","\n","}","\n")),"         ",(0,n.kt)("p",{className:"p"},"           ",(0,n.kt)("img",{className:"image",src:(0,s.Z)("https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/handle-webdrivers/KS-WEBDRIVER-final-results-after-creating-the-keyword.png"),width:500,alt:"Final results after creating the keyword"}),(0,n.kt)("br",null),(0,n.kt)("br",null),"         "),"       ")),"   "),(0,n.kt)("li",{className:"li"},"     ",(0,n.kt)("p",{className:"p"},"Open your test script. To register       ",(0,n.kt)("code",{className:"ph codeph"},"MyCustomWebEventListener")," with WebDriver, copy and       paste the sample code as below:"),"     ",(0,n.kt)("pre",{className:"pre codeblock"},(0,n.kt)("code",null,"import org.openqa.selenium.WebDriver as WebDriver","\n","import org.openqa.selenium.support.events.EventFiringWebDriver as EventFiringWebDriver","\n","\n","import com.kms.katalon.core.webui.driver.DriverFactory as DriverFactory","\n","import com.kms.katalon.core.webui.keyword.WebUiBuiltInKeywords as WebUI","\n","\n","import customlistener.MyCustomWebEventListener as MyCustomWebEventListener","\n","\n","WebUI.openBrowser('')","\n","\n","WebDriver webdriver = DriverFactory.getWebDriver()","\n","\n","EventFiringWebDriver eventFiring = ((webdriver) as EventFiringWebDriver)","\n","\n","eventFiring.register(new MyCustomWebEventListener())","\n","\n","DriverFactory.changeWebDriver(eventFiring)","\n","\n","WebUI.navigateToUrl('www.google.com')","\n","\n","WebUI.closeBrowser()","\n")),"     ",(0,n.kt)("p",{className:"p"},"       ",(0,n.kt)("img",{className:"image",src:(0,s.Z)("https://github.com/katalon-studio/docs-images/raw/master/katalon-studio/docs/handle-webdrivers/KS-WEBDRIVER-Results-after-registering-custom-keyword.png"),width:500,alt:"Final results after registering the keyword"}),(0,n.kt)("br",null),(0,n.kt)("br",null),"     "),"   "),(0,n.kt)("li",{className:"li"},"     ",(0,n.kt)("p",{className:"p"},"Hit ",(0,n.kt)("strong",{className:"ph b"},"Run"),", then observe the result in the Console       log."),"     ",(0,n.kt)("pre",{className:"pre codeblock"},(0,n.kt)("code",null,"2021-09-13 09:16:21.722 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- sessionId = ebf7a901164241457b656ffece5da9b0","\n","2021-09-13 09:16:21.747 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- browser = Chrome 93.0.4577.63","\n","2021-09-13 09:16:21.753 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- platform = Mac OS X","\n","2021-09-13 09:16:21.754 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- seleniumVersion = 3.141.59","\n","2021-09-13 09:16:21.773 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- proxyInformation = ProxyInformation ","{",' proxyOption=NO_PROXY, proxyServerType=HTTP, username=, password=********, proxyServerAddress=, proxyServerPort=0, executionList="", isApplyToDesiredCapabilities=true ',"}","\n","2021-09-13 09:16:22.642 DEBUG testcase.WebDriver Event Listeners","       ","- 2: webdriver = getWebDriver()","\n","2021-09-13 09:16:22.652 DEBUG testcase.WebDriver Event Listeners","       ","- 3: eventFiring = webdriver","\n","2021-09-13 09:16:22.673 DEBUG testcase.WebDriver Event Listeners","       ","- 4: eventFiring.register(new customlistener.MyCustomWebEventListener())","\n","2021-09-13 09:16:22.693 DEBUG testcase.WebDriver Event Listeners","       ","- 5: changeWebDriver(eventFiring)","\n","2021-09-13 09:16:22.699 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- sessionId = ebf7a901164241457b656ffece5da9b0","\n","2021-09-13 09:16:22.711 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- browser = Chrome 93.0.4577.63","\n","2021-09-13 09:16:22.711 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- platform = Mac OS X","\n","2021-09-13 09:16:22.712 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- seleniumVersion = 3.141.59","\n","2021-09-13 09:16:22.713 INFO","  ","c.k.k.core.webui.driver.DriverFactory","    ","- proxyInformation = ProxyInformation ","{",' proxyOption=NO_PROXY, proxyServerType=HTTP, username=, password=********, proxyServerAddress=, proxyServerPort=0, executionList="", isApplyToDesiredCapabilities=true ',"}","\n","2021-09-13 09:16:22.722 DEBUG testcase.WebDriver Event Listeners","       ",'- 6: navigateToUrl("www.google.com")',"\n","Before navigating to http://www.google.com","\n","2021-09-13 09:16:23.220 DEBUG testcase.WebDriver Event Listeners","       ","- 7: closeBrowser()","\n","2021-09-13 09:16:23.243 INFO","  ","c.k.katalon.core.main.TestCaseExecutor","   ","- END Test Cases/WebDriver Event Listeners","\n")),"   ")),(0,n.kt)("h2",{id:"use-remotewebdriver"},(0,n.kt)("a",{id:"id_2",class:"anchor_top_offset"}),"Use RemoteWebDriver"),(0,n.kt)("p",{xmlns:"http://www.w3.org/1999/xhtml",className:"p"},"Because ",(0,n.kt)("code",{className:"ph codeph"},"EventFiringWebDriver")," does not implement the interface ",(0,n.kt)("code",{className:"ph codeph"},"RemoteWebDriver"),", to obtain a RemoteWebDriver instance safely, do as follows:"),(0,n.kt)("pre",{xmlns:"http://www.w3.org/1999/xhtml",className:"pre codeblock"},(0,n.kt)("code",null,"....","\n","// Cast Katalon's WebDriver into EventFiringWebDriver","\n","EventFiringWebDriver eventFiring = (EventFiringWebDriver) DriverFactory.getWebDriver()","\n","// Get the driver wrapped inside","\n","WebDriver wrappedWebDriver = eventFiring.getWrappedDriver()","\n","// Cast the wrapped driver into RemoteWebDriver","\n","RemoteWebDriver katalonWebDriver = (RemoteWebDriver) wrappedWebDriver","\n","// Katalon now uses RemoteWebDriver instead of your local driver","\n")),(0,n.kt)("p",{xmlns:"http://www.w3.org/1999/xhtml",className:"p"},"We recommend encapsulating the above logic into a function to avoid code duplication."),(0,n.kt)("div",{xmlns:"http://www.w3.org/1999/xhtml",className:"note note note_note"},(0,n.kt)("span",{className:"note__title"},"Note:"),(0,n.kt)("p",{className:"p"}),(0,n.kt)("p",{className:"p"},"This is to avoid an exception in the case that your code is casting the WebDriver from DriverFactory, such as with:"),(0,n.kt)("pre",{className:"pre codeblock"},(0,n.kt)("code",null,"....","\n","RemoteWebDriver katalonWebDriver = (RemoteWebDriver) DriverFactory.getWebDriver()","\n","\n")),(0,n.kt)("p",{className:"p"},"In this scenario, from Katalon Studio 7.0.0, an exception would appear as below:"),(0,n.kt)("pre",{className:"pre codeblock"},(0,n.kt)("code",null,"Cannot cast object 'com.kms.katalon.core.webui.driver.SmartWaitWebDriver@7cab1508' with class 'com.kms.katalon.core.webui.driver.SmartWaitWebDriver' to class 'org.openqa.selenium.remote.RemoteWebDriver'","\n")),(0,n.kt)("p",{className:"p"},"(From ",(0,n.kt)("a",{className:"xref j-external-link",href:"https://forum.katalon.com/t/bug-katalon-v7-cannot-cast-smartwaitwebdriver-to-remotewebdriver/33236",target:"_blank"},"Russ Thomas's bug report"),")")),(0,n.kt)("h2",{id:"see-also"},(0,n.kt)("a",{id:"id_3",class:"anchor_top_offset"}),"See also"),(0,n.kt)("ul",{xmlns:"http://www.w3.org/1999/xhtml",className:"ul"},"   ",(0,n.kt)("li",{className:"li"},"     ",(0,n.kt)("a",{className:"xref",href:"/docs/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/upgrade-or-downgrade-webdrivers-in-katalon-studio"},"Update       or Downgrade WebDrivers"),"   "),"   ",(0,n.kt)("li",{className:"li"},"     ",(0,n.kt)("a",{className:"xref",href:"/docs/create-tests/manage-projects/set-up-projects/web-testing/handle-webdrivers/terminate-webdrivers-in-katalon-studio"},"Terminate       Webdrivers"),"   ")," "))}v.isMDXComponent=!0}}]);